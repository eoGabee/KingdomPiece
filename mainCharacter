extends CharacterBody2D

enum state  {
	PARADO,          
	ANDANDO
}
var estado = null

@onready var textura_anim = $Textura/Anim
@onready var textura = $Textura

@export var velocidade  = 200

func _process(_delta):
	movimento()
	anim_control()
	move_and_slide()

func movimento():
	var direcao = Input.get_vector('esquerda', 'direita', 'cima', 'baixo').normalized()
	var aplicar_velocidade = lerp(Vector2(), direcao*velocidade, 0.1)

	if direcao:
		estado = state.ANDANDO
		velocity = aplicar_velocidade
	else:
		estado = state.PARADO
		velocity = Vector2()

func anim_control():
	match estado:
		state.PARADO:
			anim("Idle")
		state.ANDANDO:
			anim("Walk")
	flip()

func anim(Anim):
	textura_anim.play(Anim)

func flip():
	if velocity.x > 0:
		textura.flip_h = false
	elif velocity.x < 0:
		textura.flip_h = true

func _enter_tree():
	Input.mouse_mode = Input.MOUSE_MODE_HIDDEN
func _exit_tree():
	Input.mouse_mode = Input.MOUSE_MODE_VISIBLE
